<!-- Critical Kit Homepage -->
<div class="homepage">
  
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero__content">
        <h1 class="hero__title">Welcome to Critical Kit</h1>
        <p class="hero__subtitle">Your ultimate destination for D&D adventures and RPG treasures</p>
        <div class="hero__actions">
          <a href="/collections/all" class="btn btn-primary magical-glow">Start Your Quest</a>
          <a href="/pages/our-story" class="btn btn-secondary">Our Story</a>
        </div>
      </div>
      <div class="hero__image">
        {% if settings.logo %}
          <img src="{{ settings.logo | image_url: width: 400 }}" alt="{{ shop.name }}" class="hero__logo">
        {% else %}
          <div class="hero__logo-placeholder">
            <h2>Critical Kit</h2>
            <p>D&D & RPG Store</p>
          </div>
        {% endif %}
      </div>
    </div>
  </section>

  <!-- Featured Collections -->
  <section class="featured-collections">
    <div class="container">
      <h2 class="section-title">Explore Our Collections</h2>
      <div class="grid grid-3">
        
        <!-- DM Tools and Resources -->
        {% assign dm_tools = collections['dm-tools-and-resources'] %}
        <div class="collection-card magical-glow">
          <div class="collection-card__image">
            {% if dm_tools.featured_image %}
              <img src="{{ dm_tools.featured_image | image_url: width: 400 }}" alt="{{ dm_tools.title }}" loading="lazy">
            {% else %}
              <div class="collection-card__placeholder">
                <svg class="icon" width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                </svg>
              </div>
            {% endif %}
          </div>
          <div class="collection-card__content">
            <h3 class="collection-card__title">DM Tools & Resources</h3>
            <p class="collection-card__description">Essential tools for every Dungeon Master</p>
            <a href="{{ dm_tools.url }}" class="btn btn-primary">Explore Collection</a>
          </div>
        </div>

        <!-- Dice and Dice Accessories -->
        {% assign dice = collections['dice-and-dice-accessories'] %}
        <div class="collection-card magical-glow">
          <div class="collection-card__image">
            {% if dice.featured_image %}
              <img src="{{ dice.featured_image | image_url: width: 400 }}" alt="{{ dice.title }}" loading="lazy">
            {% else %}
              <div class="collection-card__placeholder">
                <svg class="icon" width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 9.95 5.16-.21 9-4.4 9-9.95V7l-10-5z"/>
                </svg>
              </div>
            {% endif %}
          </div>
          <div class="collection-card__content">
            <h3 class="collection-card__title">Dice & Accessories</h3>
            <p class="collection-card__description">Perfect dice sets for every adventure</p>
            <a href="{{ dice.url }}" class="btn btn-primary">Explore Collection</a>
          </div>
        </div>

        <!-- Player Provisions -->
        {% assign player_provisions = collections['player-provisions'] %}
        <div class="collection-card magical-glow">
          <div class="collection-card__image">
            {% if player_provisions.featured_image %}
              <img src="{{ player_provisions.featured_image | image_url: width: 400 }}" alt="{{ player_provisions.title }}" loading="lazy">
            {% else %}
              <div class="collection-card__placeholder">
                <svg class="icon" width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
              </div>
            {% endif %}
          </div>
          <div class="collection-card__content">
            <h3 class="collection-card__title">Player Provisions</h3>
            <p class="collection-card__description">Everything players need for epic campaigns</p>
            <a href="{{ player_provisions.url }}" class="btn btn-primary">Explore Collection</a>
          </div>
        </div>

        <!-- Adventurer's Accessories -->
        {% assign adventurer_accessories = collections['adventurers-accessories'] %}
        <div class="collection-card magical-glow">
          <div class="collection-card__image">
            {% if adventurer_accessories.featured_image %}
              <img src="{{ adventurer_accessories.featured_image | image_url: width: 400 }}" alt="{{ adventurer_accessories.title }}" loading="lazy">
            {% else %}
              <div class="collection-card__placeholder">
                <svg class="icon" width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2z"/>
                </svg>
              </div>
            {% endif %}
          </div>
          <div class="collection-card__content">
            <h3 class="collection-card__title">Adventurer's Accessories</h3>
            <p class="collection-card__description">Gear up for your next adventure</p>
            <a href="{{ adventurer_accessories.url }}" class="btn btn-primary">Explore Collection</a>
          </div>
        </div>

        <!-- The Artisan's Forge -->
        {% assign artisans_forge = collections['the-artisans-forge'] %}
        <div class="collection-card magical-glow">
          <div class="collection-card__image">
            {% if artisans_forge.featured_image %}
              <img src="{{ artisans_forge.featured_image | image_url: width: 400 }}" alt="{{ artisans_forge.title }}" loading="lazy">
            {% else %}
              <div class="collection-card__placeholder">
                <svg class="icon" width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
                </svg>
              </div>
            {% endif %}
          </div>
          <div class="collection-card__content">
            <h3 class="collection-card__title">The Artisan's Forge</h3>
            <p class="collection-card__description">Handcrafted treasures and unique items</p>
            <a href="{{ artisans_forge.url }}" class="btn btn-primary">Explore Collection</a>
          </div>
        </div>

        <!-- All Products -->
        <div class="collection-card magical-glow">
          <div class="collection-card__image">
            <div class="collection-card__placeholder">
              <svg class="icon" width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
              </svg>
            </div>
          </div>
          <div class="collection-card__content">
            <h3 class="collection-card__title">All Products</h3>
            <p class="collection-card__description">Browse our complete catalog</p>
            <a href="/collections/all" class="btn btn-primary">View All</a>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Featured Products -->
  {% if collections.featured.products.size > 0 %}
  <section class="featured-products">
    <div class="container">
      <h2 class="section-title">Featured Products</h2>
      <div class="grid grid-4">
        {% for product in collections.featured.products limit: 8 %}
          {% render 'product-card', product: product %}
        {% endfor %}
      </div>
      <div class="text-center mt-4">
        <a href="/collections/featured" class="btn btn-secondary">View All Featured</a>
      </div>
    </div>
  </section>
  {% endif %}

  <!-- Newsletter Signup -->
  <section class="newsletter-section">
    <div class="container">
      <div class="newsletter-card magical-glow">
        <div class="newsletter-content">
          <h2 class="newsletter-title">Join the Guild</h2>
          <p class="newsletter-description">Stay updated with the latest adventures, new products, and exclusive offers!</p>
          
          {% form 'customer', class: 'newsletter-form' %}
            {% if form.posted_successfully? %}
              <div class="newsletter-success">
                <p>{{ 'newsletter.success' | t }}</p>
              </div>
            {% endif %}
            
            <div class="newsletter-form-group">
              <input 
                type="email" 
                name="contact[email]" 
                id="newsletter-email" 
                placeholder="{{ 'newsletter.label' | t }}" 
                class="newsletter-input"
                required
                aria-label="{{ 'newsletter.label' | t }}"
              >
              <button type="submit" class="btn btn-accent newsletter-btn">
                {{ 'newsletter.button_label' | t }}
              </button>
            </div>
            
            {% if form.errors %}
              <div class="newsletter-errors">
                {% for error in form.errors %}
                  <p>{{ error }}</p>
                {% endfor %}
              </div>
            {% endif %}
          {% endform %}
        </div>
      </div>
    </div>
  </section>

  <!-- Blog Preview -->
  {% if blog.articles.size > 0 %}
  <section class="blog-preview">
    <div class="container">
      <h2 class="section-title">Latest from the Guild</h2>
      <div class="grid grid-3">
        {% for article in blog.articles limit: 3 %}
          <article class="blog-card">
            {% if article.image %}
              <div class="blog-card__image">
                <img src="{{ article.image | image_url: width: 400 }}" alt="{{ article.title }}" loading="lazy">
              </div>
            {% endif %}
            <div class="blog-card__content">
              <time class="blog-card__date">{{ article.published_at | date: "%B %d, %Y" }}</time>
              <h3 class="blog-card__title">
                <a href="{{ article.url }}">{{ article.title }}</a>
              </h3>
              <p class="blog-card__excerpt">{{ article.excerpt | strip_html | truncate: 120 }}</p>
              <a href="{{ article.url }}" class="blog-card__link">Read More</a>
            </div>
          </article>
        {% endfor %}
      </div>
      <div class="text-center mt-4">
        <a href="{{ blog.url }}" class="btn btn-secondary">View All Articles</a>
      </div>
    </div>
  </section>
  {% endif %}

</div>

<style>
/* Homepage Specific Styles */
.homepage {
  overflow: hidden;
}

/* Hero Section */
.hero {
  background: linear-gradient(135deg, var(--color-primary) 0%, rgba(26, 54, 93, 0.9) 100%);
  color: white;
  padding: 4rem 0;
  position: relative;
}

.hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="stars" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23stars)"/></svg>');
  opacity: 0.3;
}

.hero .container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
  align-items: center;
  position: relative;
  z-index: 1;
}

.hero__title {
  font-size: 3rem;
  margin-bottom: 1rem;
  color: white;
}

.hero__subtitle {
  font-size: 1.25rem;
  margin-bottom: 2rem;
  opacity: 0.9;
}

.hero__actions {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.hero__logo {
  width: 100%;
  max-width: 400px;
  height: auto;
  filter: drop-shadow(0 10px 30px rgba(0,0,0,0.3));
}

.hero__logo-placeholder {
  text-align: center;
  padding: 2rem;
  background: rgba(255,255,255,0.1);
  border-radius: var(--border-radius);
  backdrop-filter: blur(10px);
}

.hero__logo-placeholder h2 {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
  color: var(--color-accent);
}

/* Section Titles */
.section-title {
  text-align: center;
  font-size: 2.5rem;
  margin-bottom: 3rem;
  color: var(--color-primary);
}

/* Featured Collections */
.featured-collections {
  padding: 4rem 0;
  background: var(--color-background);
}

.collection-card {
  background: white;
  border-radius: var(--border-radius);
  overflow: hidden;
  transition: transform var(--transition);
  box-shadow: var(--shadow);
}

.collection-card:hover {
  transform: translateY(-10px);
}

.collection-card__image {
  aspect-ratio: 4/3;
  overflow: hidden;
  position: relative;
}

.collection-card__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition);
}

.collection-card:hover .collection-card__image img {
  transform: scale(1.1);
}

.collection-card__placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
  color: white;
}

.collection-card__content {
  padding: 2rem;
  text-align: center;
}

.collection-card__title {
  font-size: 1.5rem;
  margin-bottom: 1rem;
  color: var(--color-primary);
}

.collection-card__description {
  margin-bottom: 1.5rem;
  color: var(--color-secondary);
}

/* Featured Products */
.featured-products {
  padding: 4rem 0;
  background: #f8fafc;
}

/* Newsletter Section */
.newsletter-section {
  padding: 4rem 0;
  background: linear-gradient(135deg, var(--color-primary) 0%, rgba(26, 54, 93, 0.95) 100%);
}

.newsletter-card {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(20px);
  border-radius: var(--border-radius);
  padding: 3rem;
  text-align: center;
  color: white;
}

.newsletter-title {
  font-size: 2rem;
  margin-bottom: 1rem;
  color: var(--color-accent);
}

.newsletter-description {
  margin-bottom: 2rem;
  opacity: 0.9;
}

.newsletter-form-group {
  display: flex;
  gap: 1rem;
  max-width: 500px;
  margin: 0 auto;
}

.newsletter-input {
  flex: 1;
  background: rgba(255,255,255,0.2);
  border: 2px solid rgba(255,255,255,0.3);
  color: white;
}

.newsletter-input::placeholder {
  color: rgba(255,255,255,0.7);
}

.newsletter-success {
  background: rgba(212, 175, 55, 0.2);
  padding: 1rem;
  border-radius: var(--border-radius);
  margin-bottom: 1rem;
}

.newsletter-errors {
  color: #fecaca;
  margin-top: 1rem;
}

/* Blog Preview */
.blog-preview {
  padding: 4rem 0;
  background: var(--color-background);
}

.blog-card {
  background: white;
  border-radius: var(--border-radius);
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: transform var(--transition);
}

.blog-card:hover {
  transform: translateY(-5px);
}

.blog-card__image {
  aspect-ratio: 16/9;
  overflow: hidden;
}

.blog-card__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition);
}

.blog-card:hover .blog-card__image img {
  transform: scale(1.05);
}

.blog-card__content {
  padding: 1.5rem;
}

.blog-card__date {
  font-size: 0.875rem;
  color: var(--color-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.blog-card__title {
  margin: 0.5rem 0 1rem;
  font-size: 1.25rem;
}

.blog-card__title a {
  color: var(--color-primary);
  text-decoration: none;
}

.blog-card__title a:hover {
  color: var(--color-accent);
}

.blog-card__excerpt {
  margin-bottom: 1rem;
  color: var(--color-text);
  line-height: 1.6;
}

.blog-card__link {
  color: var(--color-primary);
  font-weight: 600;
  text-decoration: none;
}

.blog-card__link:hover {
  color: var(--color-accent);
}

/* Responsive Design */
@media (max-width: 768px) {
  .hero .container {
    grid-template-columns: 1fr;
    text-align: center;
  }

  .hero__title {
    font-size: 2rem;
  }

  .section-title {
    font-size: 2rem;
  }

  .newsletter-form-group {
    flex-direction: column;
  }

  .hero__actions {
    justify-content: center;
  }
}
</style>